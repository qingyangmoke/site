/*!
 * tinyjs-plugin-mesh
 * Description: The Tiny.js plugin of mesh
 * Author: fangjun.yfj
 * Version: v0.0.1
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.mesh=t():(e.Tiny=e.Tiny||{},e.Tiny.mesh=t())}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="/dist",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2);Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return n(i).default}});var o=r(3);Object.defineProperty(t,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=r(4);Object.defineProperty(t,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(a).default}});var s=r(5);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return n(s).default}});var u=r(6);Object.defineProperty(t,"NineSlicePlane",{enumerable:!0,get:function(){return n(u).default}});var f=r(7);Object.defineProperty(t,"Rope",{enumerable:!0,get:function(){return n(f).default}})},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=new Tiny.Point,s=new Tiny.Polygon,u=function(e){function t(e,i,o,a,s){r(this,t);var u=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u._texture=e,u.vertices=i||new Float32Array([0,0,100,0,100,100,0,100]),u.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),u.indices=a||new Uint16Array([0,1,3,2]),u.drawMode=s||t.DRAW_MODES.TRIANGLE_MESH,u.dirty=0,u.indexDirty=0,u.blendMode=Tiny.BLEND_MODES.NORMAL,u.canvasPadding=0,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new Tiny.TextureTransform(e),u.uploadUvTransform=!1,u.pluginName="mesh",u}return i(t,e),o(t,[{key:"_renderWebGL",value:function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}},{key:"_renderCanvas",value:function(e){this.refresh(),e.plugins[this.pluginName].render(this)}},{key:"_onTextureUpdate",value:function(){this._uvTransform.texture=this._texture,this.refresh()}},{key:"multiplyUvs",value:function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)}},{key:"refresh",value:function(e){this._uvTransform.update(e)&&this._refresh()}},{key:"_refresh",value:function(){}},{key:"_calculateBounds",value:function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)}},{key:"containsPoint",value:function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,a);for(var r=this.vertices,n=s.points,i=this.indices,o=this.indices.length,u=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,f=0;f+2<o;f+=u){var h=2*i[f],l=2*i[f+1],c=2*i[f+2];if(n[0]=r[h],n[1]=r[h+1],n[2]=r[l],n[3]=r[l+1],n[4]=r[c],n[5]=r[c+1],s.contains(a.x,a.y))return!0}return!1}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return Tiny.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=Tiny.hex2rgb(e,this.tintRgb)}}]),t}(Tiny.Container);u.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1},t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),f=n(u),h=Tiny.glCore,l=Tiny.Matrix.IDENTITY,c=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.shader=null,r}return a(t,e),s(t,[{key:"onContextChange",value:function(){var e=this.renderer.gl;this.shader=new Tiny.Shader(e,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","\nvarying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n      ")}},{key:"render",value:function(e){var t=this.renderer,r=t.gl,n=e._texture;if(n.valid){var i=e._glDatas[t.CONTEXT_UID];i||(t.bindVao(null),i={shader:this.shader,vertexBuffer:h.GLBuffer.createVertexBuffer(r,e.vertices,r.STREAM_DRAW),uvBuffer:h.GLBuffer.createVertexBuffer(r,e.uvs,r.STREAM_DRAW),indexBuffer:h.GLBuffer.createIndexBuffer(r,e.indices,r.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty},i.vao=new h.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=i),t.bindVao(i.vao),e.dirty!==i.dirty&&(i.dirty=e.dirty,i.uvBuffer.upload(e.uvs)),e.indexDirty!==i.indexDirty&&(i.indexDirty=e.indexDirty,i.indexBuffer.upload(e.indices)),i.vertexBuffer.upload(e.vertices),t.bindShader(i.shader),i.shader.uniforms.uSampler=t.bindTexture(n),t.state.setBlendMode(e.blendMode),i.shader.uniforms.uTransform&&(e.uploadUvTransform?i.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=l.toArray(!0)),i.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),i.shader.uniforms.alpha=e.worldAlpha,i.shader.uniforms.tint=e.tintRgb;var o=e.drawMode===f.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(o,e.indices.length,0)}}}]),t}(Tiny.ObjectRenderer);Tiny.WebGLRenderer.registerPlugin("mesh",c),t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=n(a),u=function(){function e(t){i(this,e),this.renderer=t}return o(e,[{key:"render",value:function(e){var t=this.renderer,r=t.context,n=e.worldTransform,i=t.resolution;t.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setBlendMode(e.blendMode),e.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)}},{key:"_renderTriangleMesh",value:function(e){for(var t=e.vertices.length/2,r=0;r<t-2;r++){var n=2*r;this._renderDrawTriangle(e,n,n+2,n+4)}}},{key:"_renderTriangles",value:function(e){for(var t=e.indices,r=t.length,n=0;n<r;n+=3){var i=2*t[n],o=2*t[n+1],a=2*t[n+2];this._renderDrawTriangle(e,i,o,a)}}},{key:"_renderDrawTriangle",value:function(e,t,r,n){var i=this.renderer.context,o=e.uvs,a=e.vertices,s=e._texture;if(s.valid){var u=s.baseTexture,f=u.source,h=u.width,l=u.height,c=void 0,d=void 0,v=void 0,p=void 0,y=void 0,_=void 0;if(e.uploadUvTransform){var g=e._uvTransform.mapCoord;c=(o[t]*g.a+o[t+1]*g.c+g.tx)*u.width,d=(o[r]*g.a+o[r+1]*g.c+g.tx)*u.width,v=(o[n]*g.a+o[n+1]*g.c+g.tx)*u.width,p=(o[t]*g.b+o[t+1]*g.d+g.ty)*u.height,y=(o[r]*g.b+o[r+1]*g.d+g.ty)*u.height,_=(o[n]*g.b+o[n+1]*g.d+g.ty)*u.height}else c=o[t]*u.width,d=o[r]*u.width,v=o[n]*u.width,p=o[t+1]*u.height,y=o[r+1]*u.height,_=o[n+1]*u.height;var b=a[t],m=a[r],w=a[n],T=a[t+1],x=a[r+1],O=a[n+1];if(e.canvasPadding>0){var P=e.canvasPadding/e.worldTransform.a,j=e.canvasPadding/e.worldTransform.d,M=(b+m+w)/3,A=(T+x+O)/3,E=b-M,S=T-A,k=Math.sqrt(E*E+S*S);b=M+E/k*(k+P),T=A+S/k*(k+j),E=m-M,S=x-A,k=Math.sqrt(E*E+S*S),m=M+E/k*(k+P),x=A+S/k*(k+j),E=w-M,S=O-A,k=Math.sqrt(E*E+S*S),w=M+E/k*(k+P),O=A+S/k*(k+j)}i.save(),i.beginPath(),i.moveTo(b,T),i.lineTo(m,x),i.lineTo(w,O),i.closePath(),i.clip();var R=c*y+p*v+d*_-y*v-p*d-c*_,D=b*y+p*w+m*_-y*w-p*m-b*_,C=c*m+b*v+d*w-m*v-b*d-c*w,W=c*y*w+p*m*v+b*d*_-b*y*v-p*d*w-c*m*_,U=T*y+p*O+x*_-y*O-p*x-T*_,H=c*x+T*v+d*O-x*v-T*d-c*O,B=c*y*O+p*x*v+T*d*_-T*y*v-p*d*O-c*x*_;i.transform(D/R,U/R,C/R,H/R,W/R,B/R),i.drawImage(f,0,0,h*u.resolution,l*u.resolution,0,0,h,l),i.restore()}}},{key:"renderMeshFlat",value:function(e){var t=this.renderer.context,r=e.vertices,n=r.length/2;t.beginPath();for(var i=1;i<n-2;++i){var o=2*i,a=r[o],s=r[o+1],u=r[o+2],f=r[o+3],h=r[o+4],l=r[o+5];t.moveTo(a,s),t.lineTo(u,f),t.lineTo(h,l)}t.fillStyle="#FF0000",t.fill(),t.closePath()}},{key:"destroy",value:function(){this.renderer=null}}]),e}();Tiny.CanvasRenderer.registerPlugin("mesh",u),t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),f=n(u),h=function(e){function t(e,r,n){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._ready=!0,a.verticesX=r||10,a.verticesY=n||10,a.drawMode=f.default.DRAW_MODES.TRIANGLES,a.refresh(),a}return a(t,e),s(t,[{key:"_refresh",value:function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],n=[],i=[],o=[],a=this.verticesX-1,s=this.verticesY-1,u=e.width/a,f=e.height/s,h=0;h<t;h++){var l=h%this.verticesX,c=h/this.verticesX|0;r.push(l*u,c*f),i.push(l/a,c/s)}for(var d=a*s,v=0;v<d;v++){var p=v%a,y=v/a|0,_=y*this.verticesX+p,g=y*this.verticesX+p+1,b=(y+1)*this.verticesX+p,m=(y+1)*this.verticesX+p+1;o.push(_,g,b),o.push(g,m,b)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(i),this.colors=new Float32Array(n),this.indices=new Uint16Array(o),this.indexDirty=!0,this.multiplyUvs()}},{key:"_onTextureUpdate",value:function(){f.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}}]),t}(f.default);t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},f=r(5),h=n(f),l=10,c=function(e){function t(e,r,n,a,s){i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,4,4));return u._origWidth=e.orig.width,u._origHeight=e.orig.height,u._width=u._origWidth,u._height=u._origHeight,u.leftWidth="undefined"!=typeof r?r:l,u.rightWidth="undefined"!=typeof a?a:l,u.topHeight="undefined"!=typeof n?n:l,u.bottomHeight="undefined"!=typeof s?s:l,u.refresh(!0),u}return a(t,e),s(t,[{key:"updateHorizontalVertices",value:function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height}},{key:"updateVerticalVertices",value:function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width}},{key:"_renderCanvas",value:function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var r=this.worldTransform,n=e.resolution;e.roundPixels?t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,a=i.width,s=i.height;this.drawSegment(t,o,a,s,0,1,10,11),this.drawSegment(t,o,a,s,2,3,12,13),this.drawSegment(t,o,a,s,4,5,14,15),this.drawSegment(t,o,a,s,8,9,18,19),this.drawSegment(t,o,a,s,10,11,20,21),this.drawSegment(t,o,a,s,12,13,22,23),this.drawSegment(t,o,a,s,16,17,26,27),this.drawSegment(t,o,a,s,18,19,28,29),this.drawSegment(t,o,a,s,20,21,30,31)}},{key:"drawSegment",value:function(e,t,r,n,i,o,a,s){var u=this.uvs,f=this.vertices,h=(u[a]-u[i])*r,l=(u[s]-u[o])*n,c=f[a]-f[i],d=f[s]-f[o];h<1&&(h=1),l<1&&(l=1),c<1&&(c=1),d<1&&(d=1),e.drawImage(t,u[i]*r,u[o]*n,h,l,f[i],f[o],c,d)}},{key:"_refresh",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_refresh",this).call(this);var e=this.uvs,r=this._texture;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var n=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty=!0,this.multiplyUvs()}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(h.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),f=n(u),h=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.points=r,n.vertices=new Float32Array(4*r.length),n.uvs=new Float32Array(4*r.length),n.colors=new Float32Array(2*r.length),n.indices=new Uint16Array(2*r.length),n.autoUpdate=!0,n.refresh(),n}return a(t,e),s(t,[{key:"_refresh",value:function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,r=this.indices,n=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=e.length,o=1;o<i;o++){var a=4*o,s=o/(i-1);t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1,a=2*o,n[a]=1,n[a+1]=1,a=2*o,r[a]=a,r[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}}},{key:"refreshVertices",value:function(){var e=this.points;if(!(e.length<1))for(var t=e[0],r=void 0,n=0,i=0,o=this.vertices,a=e.length,s=0;s<a;s++){var u=e[s],f=4*s;r=s<e.length-1?e[s+1]:u,i=-(r.x-t.x),n=r.y-t.y;var h=10*(1-s/(a-1));h>1&&(h=1);var l=Math.sqrt(n*n+i*i),c=this._texture.height/2;n/=l,i/=l,n*=c,i*=c,o[f]=u.x+n,o[f+1]=u.y+i,o[f+2]=u.x-n,o[f+3]=u.y-i,t=u}}},{key:"updateTransform",value:function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()}}]),t}(f.default);t.default=h}])});