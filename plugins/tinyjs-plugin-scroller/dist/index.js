/*!
 * tinyjs-plugin-scroller
 * Description: 滚动插件
 * Author: fangjun.yfj
 * Version: v0.0.1
 */
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Scroller=i():(t.Tiny=t.Tiny||{},t.Tiny.Scroller=i())}(this,function(){return function(t){function i(e){if(o[e])return o[e].exports;var s=o[e]={exports:{},id:e,loaded:!1};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var o={};return i.m=t,i.c=o,i.p="/dist",i(0)}([function(t,i,o){t.exports=o(1)},function(t,i,o){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}var s=o(2),_=e(s);t.exports=_.default},function(t,i,o){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}var s=o(3),_=e(s),l=function(){},n=function(t,i){this.__callback=t,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:l,penetrationDeceleration:.03,penetrationAcceleration:.08};for(var o in i)this.options[o]=i[o]},h=function(t){return Math.pow(t-1,3)+1},a=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)};n.prototype={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(t,i,o,e){null!==t&&(this.__clientWidth=t),null!==i&&(this.__clientHeight=i),null!==o&&(this.__contentWidth=o),null!==e&&(this.__contentHeight=e),this.__computeScrollMax(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition:function(t,i){this.__clientLeft=t||0,this.__clientTop=i||0},setSnapSize:function(t,i){this.__snapWidth=t,this.__snapHeight=i},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,right:this.__scrollLeft+this.__clientWidth/this.__zoomLevel,bottom:this.__scrollTop+this.__clientHeight/this.__zoomLevel,zoom:this.__zoomLevel}},getPoint:function(t,i){var o=this.getValues();return{left:t/o.zoom,top:i/o.zoom}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(t,i,o,e,s){if(!this.options.zooming)throw new Error("Zooming is not enabled!");s&&(this.__zoomComplete=s),this.__isDecelerating&&(_.default.stop(this.__isDecelerating),this.__isDecelerating=!1);var l=this.__zoomLevel;void 0===o&&(o=this.__clientWidth/2),void 0===e&&(e=this.__clientHeight/2),t=Math.max(Math.min(t,this.options.maxZoom),this.options.minZoom),this.__computeScrollMax(t);var n=t/l,h=n*(this.__scrollLeft+o)-o,a=n*(this.__scrollTop+e)-e;h>this.__maxScrollLeft?h=this.__maxScrollLeft:h<0&&(h=0),a>this.__maxScrollTop?a=this.__maxScrollTop:a<0&&(a=0),this.__publish(h,a,t,i)},zoomBy:function(t,i,o,e,s){this.zoomTo(this.__zoomLevel*t,i,o,e,s)},scrollTo:function(t,i,o,e){if(this.__isDecelerating&&(_.default.stop(this.__isDecelerating),this.__isDecelerating=!1),void 0!==e&&e!==this.__zoomLevel){if(!this.options.zooming)throw new Error("Zooming is not enabled!");t*=e,i*=e,this.__computeScrollMax(e)}else e=this.__zoomLevel;this.options.scrollingX?this.options.paging?t=Math.round(t/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(t=Math.round(t/this.__snapWidth)*this.__snapWidth):t=this.__scrollLeft,this.options.scrollingY?this.options.paging?i=Math.round(i/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(i=Math.round(i/this.__snapHeight)*this.__snapHeight):i=this.__scrollTop,t=Math.max(Math.min(this.__maxScrollLeft,t),0),i=Math.max(Math.min(this.__maxScrollTop,i),0),t===this.__scrollLeft&&i===this.__scrollTop&&(o=!1),this.__publish(t,i,e,o)},scrollBy:function(t,i,o){var e=this.__isAnimating?this.__scheduledLeft:this.__scrollLeft,s=this.__isAnimating?this.__scheduledTop:this.__scrollTop;this.scrollTo(e+(t||0),s+(i||0),o)},doMouseZoom:function(t,i,o,e){var s=t>0?.97:1.03;return this.zoomTo(this.__zoomLevel*s,!1,o-this.__clientLeft,e-this.__clientTop)},doTouchStart:function(t,i){if(void 0===t.length)throw new Error("Invalid touch list: "+t);if(i instanceof Date&&(i=i.valueOf()),"number"!=typeof i)throw new Error("Invalid timestamp value: "+i);this.__interruptedAnimation=!0,this.__isDecelerating&&(_.default.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0),this.__isAnimating&&(_.default.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var o,e,s=1===t.length;s?(o=t[0].pageX,e=t[0].pageY):(o=Math.abs(t[0].pageX+t[1].pageX)/2,e=Math.abs(t[0].pageY+t[1].pageY)/2),this.__initialTouchLeft=o,this.__initialTouchTop=e,this.__zoomLevelStart=this.__zoomLevel,this.__lastTouchLeft=o,this.__lastTouchTop=e,this.__lastTouchMove=i,this.__lastScale=1,this.__enableScrollX=!s&&this.options.scrollingX,this.__enableScrollY=!s&&this.options.scrollingY,this.__isTracking=!0,this.__didDecelerationComplete=!1,this.__isDragging=!s,this.__isSingleTouch=s,this.__positions=[]},doTouchMove:function(t,i,o){if(void 0===t.length)throw new Error("Invalid touch list: "+t);if(i instanceof Date&&(i=i.valueOf()),"number"!=typeof i)throw new Error("Invalid timestamp value: "+i);if(this.__isTracking){var e,s;2===t.length?(e=Math.abs(t[0].pageX+t[1].pageX)/2,s=Math.abs(t[0].pageY+t[1].pageY)/2):(e=t[0].pageX,s=t[0].pageY);var _=this.__positions;if(this.__isDragging){var l=e-this.__lastTouchLeft,n=s-this.__lastTouchTop,h=this.__scrollLeft,a=this.__scrollTop,r=this.__zoomLevel;if(void 0!==o&&this.options.zooming){var c=r;if(r=r/this.__lastScale*o,r=Math.max(Math.min(r,this.options.maxZoom),this.options.minZoom),c!==r){var p=e-this.__clientLeft,u=s-this.__clientTop;h=(p+h)*r/c-p,a=(u+a)*r/c-u,this.__computeScrollMax(r)}}if(this.__enableScrollX){h-=l*this.options.speedMultiplier;var m=this.__maxScrollLeft;(h>m||h<0)&&(this.options.bouncing?h+=l/2*this.options.speedMultiplier:h=h>m?m:0)}if(this.__enableScrollY){a-=n*this.options.speedMultiplier;var f=this.__maxScrollTop;(a>f||a<0)&&(this.options.bouncing?a+=n/2*this.options.speedMultiplier:a=a>f?f:0)}_.length>60&&_.splice(0,30),_.push(h,a,i),this.__publish(h,a,r)}else{var g=this.options.locking?3:0,d=5,T=Math.abs(e-this.__initialTouchLeft),v=Math.abs(s-this.__initialTouchTop);this.__enableScrollX=this.options.scrollingX&&T>=g,this.__enableScrollY=this.options.scrollingY&&v>=g,_.push(this.__scrollLeft,this.__scrollTop,i),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(T>=d||v>=d),this.__isDragging&&(this.__interruptedAnimation=!1)}this.__lastTouchLeft=e,this.__lastTouchTop=s,this.__lastTouchMove=i,this.__lastScale=o}},doTouchEnd:function(t){if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging)if(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&t-this.__lastTouchMove<=100){for(var i=this.__positions,o=i.length-1,e=o,s=o;s>0&&i[s]>this.__lastTouchMove-100;s-=3)e=s;if(e!==o){var _=i[o]-i[e],l=this.__scrollLeft-i[e-2],n=this.__scrollTop-i[e-1];this.__decelerationVelocityX=l/_*(1e3/60),this.__decelerationVelocityY=n/_*(1e3/60);var h=this.options.paging||this.options.snapping?4:1;(Math.abs(this.__decelerationVelocityX)>h||Math.abs(this.__decelerationVelocityY)>h)&&this.__startDeceleration(t)}else this.options.scrollingComplete()}else t-this.__lastTouchMove>100&&this.options.scrollingComplete();this.__isDecelerating||((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel)),this.__positions.length=0}},__publish:function(t,i,o,e){var s=this.__isAnimating;if(s&&(_.default.stop(s),this.__isAnimating=!1),e&&this.options.animating){this.__scheduledLeft=t,this.__scheduledTop=i,this.__scheduledZoom=o;var l=this.__scrollLeft,n=this.__scrollTop,r=this.__zoomLevel,c=t-l,p=i-n,u=o-r,m=function(t,i,o){o&&(this.__scrollLeft=l+c*t,this.__scrollTop=n+p*t,this.__zoomLevel=r+u*t,this.__callback&&this.__callback(this.__scrollLeft,this.__scrollTop,this.__zoomLevel))}.bind(this),f=function(t){return this.__isAnimating===t}.bind(this),g=function(t,i,o){i===this.__isAnimating&&(this.__isAnimating=!1),(this.__didDecelerationComplete||o)&&this.options.scrollingComplete(),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))}.bind(this);this.__isAnimating=_.default.start(m,f,g,this.options.animationDuration,s?h:a)}else this.__scheduledLeft=this.__scrollLeft=t,this.__scheduledTop=this.__scrollTop=i,this.__scheduledZoom=this.__zoomLevel=o,this.__callback&&this.__callback(t,i,o),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))},__computeScrollMax:function(t){void 0===t&&(t=this.__zoomLevel),this.__maxScrollLeft=Math.max(this.__contentWidth*t-this.__clientWidth,0),this.__maxScrollTop=Math.max(this.__contentHeight*t-this.__clientHeight,0)},__startDeceleration:function(t){if(this.options.paging){var i=Math.max(Math.min(this.__scrollLeft,this.__maxScrollLeft),0),o=Math.max(Math.min(this.__scrollTop,this.__maxScrollTop),0),e=this.__clientWidth,s=this.__clientHeight;this.__minDecelerationScrollLeft=Math.floor(i/e)*e,this.__minDecelerationScrollTop=Math.floor(o/s)*s,this.__maxDecelerationScrollLeft=Math.ceil(i/e)*e,this.__maxDecelerationScrollTop=Math.ceil(o/s)*s}else this.__minDecelerationScrollLeft=0,this.__minDecelerationScrollTop=0,this.__maxDecelerationScrollLeft=this.__maxScrollLeft,this.__maxDecelerationScrollTop=this.__maxScrollTop;var l=function(t,i,o){this.__stepThroughDeceleration(o)}.bind(this),n=this.options.snapping?4:.1,h=function(){var t=Math.abs(this.__decelerationVelocityX)>=n||Math.abs(this.__decelerationVelocityY)>=n;return t||(this.__didDecelerationComplete=!0),t}.bind(this),a=function(t,i,o){this.__isDecelerating=!1,this.__didDecelerationComplete&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,this.options.snapping)}.bind(this);this.__isDecelerating=_.default.start(l,h,a)},__stepThroughDeceleration:function(t){var i=this.__scrollLeft+this.__decelerationVelocityX,o=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var e=Math.max(Math.min(this.__maxDecelerationScrollLeft,i),this.__minDecelerationScrollLeft);e!==i&&(i=e,this.__decelerationVelocityX=0);var s=Math.max(Math.min(this.__maxDecelerationScrollTop,o),this.__minDecelerationScrollTop);s!==o&&(o=s,this.__decelerationVelocityY=0)}if(t?this.__publish(i,o,this.__zoomLevel):(this.__scrollLeft=i,this.__scrollTop=o),!this.options.paging){var _=.95;this.__decelerationVelocityX*=_,this.__decelerationVelocityY*=_}if(this.options.bouncing){var l=0,n=0,h=this.options.penetrationDeceleration,a=this.options.penetrationAcceleration;i<this.__minDecelerationScrollLeft?l=this.__minDecelerationScrollLeft-i:i>this.__maxDecelerationScrollLeft&&(l=this.__maxDecelerationScrollLeft-i),o<this.__minDecelerationScrollTop?n=this.__minDecelerationScrollTop-o:o>this.__maxDecelerationScrollTop&&(n=this.__maxDecelerationScrollTop-o),0!==l&&(l*this.__decelerationVelocityX<=0?this.__decelerationVelocityX+=l*h:this.__decelerationVelocityX=l*a),0!==n&&(n*this.__decelerationVelocityY<=0?this.__decelerationVelocityY+=n*h:this.__decelerationVelocityY=n*a)}}},t.exports=n},function(t,i){"use strict";var o="undefined"==typeof window?void 0:window,e=Date.now||function(){return+new Date},s=60,_=1e3,l={},n=1;i.requestAnimationFrame=function(){var t=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame,i=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(i=!1),i)return function(i,o){t(i,o)};var e=60,s={},_=0,l=1,n=null,h=+new Date;return function(t,i){var o=l++;return s[o]=t,_++,null===n&&(n=setInterval(function(){var t=+new Date,i=s;s={},_=0;for(var o in i)i.hasOwnProperty(o)&&(i[o](t),h=t);t-h>2500&&(clearInterval(n),n=null)},1e3/e)),o}}(),i.stop=function(t){var i=null!==l[t];return i&&(l[t]=null),i},i.isRunning=function(t){return null!==l[t]},i.start=function(t,o,h,a,r,c){var p=e(),u=p,m=0,f=0,g=n++;if(g%20===0){var d={};for(var T in l)d[T]=!0;l=d}var v=function n(d){var T=d!==!0,v=e();if(!l[g]||o&&!o(g))return l[g]=null,void h(s-f/((v-p)/_),g,!1);if(T)for(var L=Math.round((v-u)/(_/s))-1,S=0;S<Math.min(L,4);S++)n(!0),f++;a&&(m=(v-p)/a,m>1&&(m=1));var D=r?r(m):m;t(D,v,T)!==!1&&1!==m||!T?T&&(u=v,i.requestAnimationFrame(n,c)):(l[g]=null,h(s-f/((v-p)/_),g,1===m||void 0===a))};return l[g]=!0,i.requestAnimationFrame(v,c),g}}])});